<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ZenTrader Pro ‚Äî v4.1 (Full, wrap-safe)</title>
<style>
:root{
  --bg:#0b0b0b; --card:#111827; --text:#e5e7eb; --muted:#9aa4b2; --accent:#16a34a;
  --good:#22c55e; --bad:#ef4444; --line:#1f2937;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
a{color:#93c5fd}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}
.banner{display:flex;align-items:center;justify-content:center;gap:14px;padding:18px 16px;background:#000;border-bottom:1px solid var(--line)}
.yinyang{width:56px;height:56px;border-radius:50%;
  background:radial-gradient(circle at 50% 25%,#000 0 9px,#fff 10px 50%),
             radial-gradient(circle at 50% 75%,#fff 0 9px,#000 10px 50%),
             linear-gradient(90deg,#000 50%,#fff 0)}
.title{font-size:40px;font-weight:800;letter-spacing:.3px;min-width:0}
.controls{
  position:sticky;top:0;z-index:5;display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;align-items:center;
  padding:10px 16px;background:rgba(17,24,39,.98);backdrop-filter:blur(6px);border-bottom:1px solid var(--line);min-width:0
}
.controls > div{display:flex;gap:8px;flex-wrap:wrap;align-items:center;min-width:0}
.pill{display:inline-flex;align-items:center;gap:6px;border:1px solid #334155;background:#0b1220;color:#cbd5e1;border-radius:999px;padding:6px 10px;font-size:12px;min-width:0}
button{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
button.ghost{background:#0b1220;color:#fff;border:1px solid #374151}
button.danger{background:#ef4444}
button[disabled]{opacity:.6;cursor:not-allowed}
select,input{background:#0b1220;color:#e5e7eb;border:1px solid #374151;border-radius:10px;padding:10px;min-width:0;max-width:100%}
input[type="time"],input[type="date"]{width:100%}
.wrap{max-width:1200px;margin:18px auto 24px;padding:0 16px;overflow-x:hidden;min-width:0}
.grid{display:grid;grid-template-columns:1.15fr .85fr;gap:16px;min-width:0}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);min-width:0}
h2{margin:6px 0 12px;color:#d1fae5}
.row{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:10px;min-width:0}
.row-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:10px;min-width:0}
.row-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;min-width:0}
.actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;min-width:0}
pre{background:#0b1220;border:1px dashed #374151;border-radius:10px;padding:10px;max-height:160px;overflow:auto;white-space:pre-wrap;word-break:break-word}
.dot{width:10px;height:10px;border-radius:50%;background:#6b7280;border:1px solid #374151}
.dot.live{background:#22c55e}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:11px;border:1px solid #374151;background:#0b1220;color:#e5e7eb}
.badge.good{border-color:#14532d;color:#86efac;background:#052e16}
.table{width:100%;border-collapse:separate;border-spacing:0 6px;min-width:0}
.table th{font-weight:600;color:#9ca3af;text-align:left;padding:6px 8px}
.table td{background:#0b1220;border:1px solid #1f2937;padding:8px;border-left:none;border-right:none;max-width:1px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.rowbar{display:flex;gap:6px;flex-wrap:wrap}
.kgrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;min-width:0}
.kcard{background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:12px;min-width:0}
.klabel{color:#93a3b8;font-size:12px}
.kvalue{font-size:22px;margin-top:4px;min-width:0}
.warn{display:none;background:#7c2d12;color:#fff;padding:8px 12px;border-bottom:1px solid #78350f;font-size:14px}
.footerVer{opacity:.6;font-size:12px;text-align:right;margin-top:6px}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px;min-width:0}
.chip{border:1px solid #334155;background:#0b1220;color:#cbd5e1;border-radius:999px;padding:4px 8px;font-size:12px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.chip.ok{border-color:#14532d;color:#86efac;background:#052e16}
canvas{display:block;width:100% !important;height:auto;max-width:100%}
@media(max-width:1050px){.grid{grid-template-columns:1fr}.title{font-size:34px}}
</style>
</head>
<body>
<div class="warn" id="browserWarn">‚ö†Ô∏è Voice features require <b>Chrome</b> or Edge over HTTPS.</div>

<div class="banner">
  <div class="yinyang" aria-hidden="true"></div>
  <div class="title">ZenTrader Pro</div>
</div>

<div class="controls">
  <div>
    <label class="pill" title="Per-side commission ($)">
      Per-side $ <input id="gcRateInput" type="number" step="0.01" style="width:90px;background:transparent;border:none;color:#e5e7eb" />
    </label>
    <label class="pill" title="Auto commission = per-side √ó 2 √ó qty">
      <input type="checkbox" id="gcAutoToggle" checked> Auto-apply commission
    </label>
    <label class="pill">Range
      <select id="rangeSelect">
        <option value="all">All</option><option value="day">Daily</option>
        <option value="week">Weekly</option><option value="month">Monthly</option>
        <option value="year">Yearly</option>
      </select>
    </label>
    <label class="pill">Chart
      <select id="granSelect">
        <option value="day">Daily</option><option value="week">Weekly</option>
        <option value="month">Monthly</option><option value="year">Yearly</option>
      </select>
      <select id="metricSelect">
        <option value="net">Net P&L</option>
        <option value="gross">Gross P&L</option>
        <option value="commission">Commissions</option>
      </select>
    </label>
  </div>
  <div>
    <button class="ghost" id="exportBtn">Export CSV</button>
    <label class="pill"><input type="file" id="importFile" accept=".csv" style="display:none"><span id="importBtn" style="cursor:pointer">Import CSV</span></label>
    <select id="lang">
      <option value="en-US" selected>English (US)</option>
      <option value="en-GB">English (UK)</option><option value="en-CA">English (CA)</option>
      <option value="en-AU">English (AU)</option>
    </select>
    <button id="primeMicBtn" class="ghost" title="Grant mic permission">Prime Mic</button>
    <button id="voiceBtn" title="Start/stop voice">üé§ Voice</button><span class="dot" id="voiceDot" title="mic status"></span>
    <label class="pill"><input type="checkbox" id="keepAlive" checked> Keep mic alive</label>
    <label class="pill"><input type="checkbox" id="liveFill" checked> Live fill</label>
    <label class="pill"><input type="checkbox" id="ttsToggle" checked> üîà Speak on review & save</label>
    <span class="pill" id="envPill">env: ‚Ä¶</span>
    <span class="pill">ZTP v4.1</span>
  </div>
</div>

<div class="wrap">
  <div class="grid">
    <!-- Form -->
    <div class="card">
      <h2>Add / Edit Trade</h2>
      <div class="row-3">
        <div><label>Date</label><input type="date" id="date"></div>
        <div><label>Symbol</label><input id="symbol" placeholder="ES, NQ, AAPL"></div>
        <div><label>Direction</label><select id="direction"><option>Long</option><option>Short</option></select></div>
      </div>
      <div class="row">
        <div><label>Qty</label><input id="qty" type="number" value="1" step="1" min="1"></div>
        <div><label>Entry Price</label><input id="entry" type="number" step="0.01" placeholder="5000"></div>
        <div><label>Exit Price</label><input id="exit" type="number" step="0.01" placeholder="5010"></div>
        <div><label>Commission ($ total)</label><input id="commission" type="number" step="0.01" value=""></div>
      </div>
      <div class="row-3">
        <div><label>Entry Time</label><input id="entryTime" type="time" placeholder="09:35"></div>
        <div><label>Exit Time</label><input id="exitTime" type="time" placeholder="10:12"></div>
        <div><label>Duration (min)</label><input id="duration" type="number" step="1" placeholder="auto"></div>
      </div>
      <div class="chips" id="chipBar"></div>
      <div class="actions">
        <button id="addBtn">Add Trade</button>
        <button class="ghost" id="updateBtn" disabled>Update Selected</button>
        <button class="ghost" id="clearFormBtn">Clear Form</button>
        <button class="danger" id="wipeBtn">Wipe All</button>
      </div>
      <div style="margin-top:8px;color:#93c5fd">
        Engine: <span id="vEngine">?</span> ‚Äî Status: <span id="vStatus">idle</span>
      </div>
      <pre id="vLog" class="mono" style="margin-top:8px"></pre>
    </div>

    <!-- KPIs -->
    <div class="card">
      <h2
	

	

	

	

	

	

	

	
