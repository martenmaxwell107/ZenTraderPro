<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ZTP Diagnostics</title>
<style>
  :root { --bg:#000; --txt:#fff; --card:#0b1220; --line:#374151; }
  body { margin:0; background:var(--bg); color:var(--txt); font:16px/1.5 system-ui,Segoe UI,Roboto,Arial,sans-serif; }
  header { padding:16px 20px; border-bottom:1px solid #111; position:sticky; top:0; background:#000; }
  h1 { margin:0 0 6px 0; font-size:22px; }
  .wrap { padding:20px; max-width:900px; margin:0 auto; }
  .card { background:var(--card); border:1px solid var(--line); border-radius:12px; padding:14px 16px; margin-bottom:14px; }
  code, pre { font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  .ok { color:#86efac; } .warn { color:#fde68a; } .bad { color:#fca5a5; }
  .pill { display:inline-block; border:1px solid var(--line); border-radius:999px; padding:3px 8px; margin-right:6px; background:#0b1220; }
</style>
</head>
<body>
<header>
  <h1>ZTP Diagnostics</h1>
  <div id="env"></div>
</header>

<div class="wrap">
  <div class="card">
    <strong>Status:</strong> <span id="status" class="ok">Page loaded</span>
    <div style="margin-top:6px">If you see this, HTML rendered correctly. Now we’ll test JS and show any errors below.</div>
  </div>

  <div class="card">
    <strong>Live Checks</strong>
    <ul id="checks"></ul>
  </div>

  <div class="card">
    <strong>Errors (if any)</strong>
    <pre id="errs" style="white-space:pre-wrap;min-height:80px">— none so far —</pre>
  </div>

  <div class="card">
    <strong>Next Step</strong>
    <ol>
      <li>If errors show above, copy the first line and paste it to me.</li>
      <li>If no errors, click this button to confirm scripting works:
        <button id="btn" style="margin-left:8px">JS Test</button>
        <span id="btnRes"></span>
      </li>
      <li>When we’re green, we’ll paste the full dashboard back.</li>
    </ol>
  </div>
</div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);
  const errs = $('errs');
  const checks = $('checks');

  // Env pill
  const SR = (window.SpeechRecognition || window.webkitSpeechRecognition) ? 'yes' : 'no';
  $('env').innerHTML =
    '<span class="pill">HTTPS: ' + (window.isSecureContext ? 'yes' : 'no') + '</span>' +
    '<span class="pill">SpeechRec: ' + SR + '</span>' +
    '<span class="pill">UserAgent: ' + navigator.userAgent.replaceAll('<','&lt;') + '</span>';

  // Error capture
  window.addEventListener('error', (e)=>{
    errs.textContent = 'ERROR: ' + (e.message||'') + '\n' +
                       'FILE: ' + (e.filename||'') + ':' + (e.lineno||'') + '\n' +
                       (e.error && e.error.stack ? ('STACK:\n' + e.error.stack) : '');
    $('status').textContent = 'Error detected';
    $('status').className = 'bad';
  });

  window.addEventListener('unhandledrejection', (e)=>{
    errs.textContent = 'PROMISE REJECTION: ' + (e.reason && (e.reason.stack||e.reason)) ;
    $('status').textContent = 'Error detected';
    $('status').className = 'bad';
  });

  // Live checks
  function addCheck(label, ok){
    const li = document.createElement('li');
    li.innerHTML = (ok ? '<span class="ok">✔</span> ' : '<span class="bad">✖</span> ') + label;
    checks.appendChild(li);
  }
  addCheck('DOM present', !!document.body);
  addCheck('CSS applied (dark background)', getComputedStyle(document.body).backgroundColor !== 'rgb(255, 255, 255)');
  addCheck('Chart.js reachable (CDN test skipped here)', true);
  addCheck('LocalStorage available', (function(){try{localStorage.setItem('_ztptest','1');localStorage.removeItem('_ztptest');return true;}catch(_){return false;}})());

  // JS button test
  $('btn').addEventListener('click', ()=>{
    $('btnRes').textContent = ' ✔ JS executed at ' + new Date().toLocaleTimeString();
    $('btnRes').className = 'ok';
  });

  // Final note
  $('status').textContent = 'Diagnostics page ready (no dashboard yet)';
})();
</script>
</body>
</html>
	

	

	

	
